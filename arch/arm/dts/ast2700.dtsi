// SPDX-License-Identifier: GPL-2.0+
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/gpio/aspeed-gpio.h>
#include "skeleton.dtsi"

/ {
	model = "Aspeed BMC";
	compatible = "aspeed,ast2700";
	#address-cells = <1>;
	#size-cells = <1>;
	interrupt-parent = <&gic>;

	aliases {
		serial4 = &uart5;
	};

	cpus {
		#address-cells = <1>;
		#size-cells = <0>;
		enable-method = "aspeed,ast2700-smp";

		cpu@0 {
			compatible = "arm,cortex-a35";
			device_type = "cpu";
			reg = <0>;
		};

		cpu@1 {
			compatible = "arm,cortex-a35";
			device_type = "cpu";
			reg = <1>;
		};

		cpu@2 {
			compatible = "arm,cortex-a35";
			device_type = "cpu";
			reg = <1>;
		};

		cpu@3 {
			compatible = "arm,cortex-a35";
			device_type = "cpu";
			reg = <1>;
		};

	};

	timer {
		compatible = "arm,armv8-timer";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 13 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_LOW)>,
				<GIC_PPI 14 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_LOW)>,
				<GIC_PPI 11 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_LOW)>,
				<GIC_PPI 10 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_LOW)>;
	};

	ahb {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;
		device_type = "soc";
		ranges;

		gic: interrupt-controller@40461000 {
				compatible = "arm,cortex-a35-gic";
				interrupts = <GIC_PPI 9 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_HIGH)>;
				#interrupt-cells = <3>;
				interrupt-controller;
				interrupt-parent = <&gic>;
				reg = <0x40461000 0x1000>,
					<0x40462000 0x1000>,
					<0x40464000 0x2000>,
					<0x40466000 0x2000>;
		};
		apb {
			compatible = "simple-bus";
			#address-cells = <1>;
			#size-cells = <1>;
			ranges;
			u-boot,dm-pre-reloc;

			uart5: serial@12c1a000 {
				compatible = "ns16550a";
				reg = <0x12c1a000 0x1000>;
				reg-shift = <2>;
				interrupts = <GIC_SPI 36 IRQ_TYPE_LEVEL_HIGH>;
				clocks = <&clk0 ASPEED_CLK_GATE_UART5CLK>;
				clock-frequency = <1846154>;
				no-loopback-test;
				u-boot,dm-pre-reloc;
				status = "disabled";
			};

			mdio: bus@14040000 {
				compatible = "simple-bus";
				#address-cells = <1>;
				#size-cells = <1>;
				ranges = <0 0x14040000 0x100>;

				mdio0: mdio@0 {
					compatible = "aspeed,ast2600-mdio";
					reg = <0 0x8>;
					resets = <&rst1 ASPEED_RESET_MII>;
					status = "disabled";
				};

				mdio1: mdio@8 {
					compatible = "aspeed,ast2600-mdio";
					reg = <0x8 0x8>;
					resets = <&rst1 ASPEED_RESET_MII>;
					status = "disabled";
				};

				mdio2: mdio@10 {
					compatible = "aspeed,ast2600-mdio";
					reg = <0x10 0x8>;
					resets = <&rst1 ASPEED_RESET_MII>;
					status = "disabled";
				};

				mdio3: mdio@18 {
					compatible = "aspeed,ast2600-mdio";
					reg = <0x18 0x8>;
					resets = <&rst1 ASPEED_RESET_MII>;
					status = "disabled";
				};
			};

			mac0: ftgmac@14050000 {
				compatible = "aspeed,ast2700-mac", "faraday,ftgmac100";
				reg = <0x14050000 0x180>;
				resets = <&rst1 ASPEED_RESET_MAC0>;
				status = "disabled";
			};

			mac1: ftgmac@14060000 {
				compatible = "aspeed,ast2700-mac", "faraday,ftgmac100";
				reg = <0x14060000 0x180>;
				resets = <&rst1 ASPEED_RESET_MAC1>;
				status = "disabled";
			};

			mac2: ftgmac@14070000 {
				compatible = "aspeed,ast2700-mac", "faraday,ftgmac100";
				reg = <0x14070000 0x180>;
				resets = <&rst1 ASPEED_RESET_MAC2>;
				status = "disabled";
			};

		};

	};

};

